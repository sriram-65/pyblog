<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>



</head>
<body>

    <nav class="navbar navbar-expand-lg bg-body-tertiary bg-dark">
        <div class="container-fluid">
          <a class="navbar-brand brand" href="/">Blogsee</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
              <li class="nav-item me-5">
                <a class="nav-link active" aria-current="page" href="/">Home</a>
              </li>
              <li class="nav-item me-5">
                <a class="nav-link" href="#">About</a>
              </li>
              <li class="nav-item me-5">
                <a class="nav-link" href="#">Upload</a>
              </li>
            </ul>
            <form class="d-flex" role="search" method="GET" action="/search">
              <input class="form-control me-3" name="query"  type="search" required placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success" type="submit" id="search">Search</button>
            </form>
          </div>
        </div>
      </nav>
    
       
      <br>
      <section id="home">
        <div class="container">
          <h1 class="text-capitalize">Make Your Day with My App</h1>
          <br>
          <div class="alert alert-danger" role="alert">
            Warning: Please ensure that you upload only appropriate and legal content. Any uploads containing offensive, copyrighted, or sensitive material may be removed. By proceeding, you agree to comply with our terms and conditions.
          </div>
          <button class="btn btn-dark"><a href="#upload" class="text-decoration-none" style="color:white">Get Start</a></button>
        </div>
      </section>


    <section id="upload">
        <div class="container">
            <div class="card p-4 shadow-lg border-0 mt-5">
                <h2 class="text-center">Upload Your Post</h2>
                <form method="POST" action="/upload" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="title" class="form-label">Title</label>
                        <input type="text" class="form-control" name="title" id="title" placeholder="Enter post title" required>
                    </div>
                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <textarea class="form-control" name="des" id="description" rows="4" placeholder="Enter post description" required></textarea>
                    </div>

                    <div class="mb-3">
                      <label for="description" class="form-label">Author</label>
                      <input type="text" class="form-control" name="author" id="title" placeholder="Your Name" required>
                  </div>
                  <div class="mb-3">
                    <label for="description" class="form-label">Category</label>
                    <input type="text" class="form-control" name="cat" id="title" placeholder="Category" required>
                </div>

                    <div class="mb-3">
                        <label for="file" id="fileInput" class="form-label">Upload Image</label>
                        <input type="file" class="form-control" name="file" id="file" required>
                    </div>

                    
                    <div class="mb-3">
                        <label for="ai-prompt" class="form-label">AI Image Prompt</label>
                        <input type="text" class="form-control" id="ai-prompt" placeholder="Describe an image you want" >
                    </div>

                    <button type="button" class="btn btn-danger w-86" id="generate-btn">Generate AI Image</button>
                    <div id="ai-image-container" class="mt-3" style="display:none;">
                        <h5>Generated Image:</h5>
                        <img id="ai-image" class="img-fluid" />
                    </div>

                    <button type="submit" class="btn btn-primary w-100 mt-3">Upload</button>
                </form>
                <a href="/" class="d-block text-center mt-3">Back to Home</a>
            </div>
        </div>
    </section>


    <footer class="bd-footer py-4 py-md-5 mt-5 bg-body-tertiary">
        <div class="container py-4 py-md-5 px-4 px-md-3 text-body-secondary">
          <div class="row">
            <div class="col-lg-3 mb-3">
              <a class="d-inline-flex align-items-center mb-2 text-body-emphasis text-decoration-none" href="/" aria-label="Bootstrap">
                <span class="fs-5">Blogsee</span>
              </a>
              <ul class="list-unstyled small">
                <li class="mb-2">Designed and built with all the love in the world by Sriram.</li>
                <li class="mb-2">Code licensed MIT, docs @SRIRAM.</li>
                <li class="mb-2">Currently v1.0.0</li>
              </ul>
            </div>
            <div class="col-6 col-lg-2 offset-lg-1 mb-3">
              <h5>Links</h5>
              <ul class="list-unstyled">
                <li class="mb-2"><a href="/">Home</a></li>
                <li class="mb-2"><a href="#">About</a></li>
                <li class="mb-2"><a href="#">Upload</a></li>
              </ul>
            </div>
            <div class="col-6 col-lg-2 mb-3">
              <h5>Community</h5>
              <ul class="list-unstyled">
                <li class="mb-2"><a href="#">Issues</a></li>
                <li class="mb-2"><a href="#">Discussions</a></li>
              </ul>
            </div>
          </div>
        </div>
    </footer>

    <style>


     
    </style>
    <script>


const aiPromptInput = document.getElementById("ai-prompt");
const generateBtn = document.getElementById("generate-btn");
const aiImageContainer = document.getElementById("ai-image-container");
const aiImage = document.getElementById("ai-image");
const su = document.getElementById("su")

generateBtn.addEventListener("click", async () => {
    const prompt = aiPromptInput.value;
    if (!prompt) {
        Swal.fire({
          title:"Enter Your Prompt",
          text: "Input box is empty!",
          icon: "error",
          confirmButtonText: "OK"

        })
        return;
    }
    else if (prompt.length<8){
      Swal.fire({
        title:"Your Prompt Must Be Bigger",
        text: "Enter Valid Prompt",
        icon: "error",
        confirmButtonText: "OK"

      })
      return
    }

    generateBtn.innerHTML = "Generating Pls Wait ...."
    aiImageContainer.style.display = "none"; 

    try {
        const response = await fetch(
            "https://api-inference.huggingface.co/models/black-forest-labs/FLUX.1-schnell",
            {
                headers: {
                    Authorization: `Bearer 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`, 
                    "Content-Type": "application/json",
                },
                method: "POST",
                body: JSON.stringify({ inputs: prompt }),
            }
        );

        if (response.ok) {
            const result = await response.blob();
            aiImage.src = URL.createObjectURL(result);
            aiImageContainer.style.display = "block";

         
            const fileInput = document.getElementById("file");
            const file = new File([result], "GeneratedImage.jpg", { type: "image/jpeg" });

            const dataTransfer = new DataTransfer();
            dataTransfer.items.add(file);
            fileInput.files = dataTransfer.files; 
            Swal.fire({
              title: "Success!",
              text: "Iamge Is Generated Sucessfully. Now You Can Upload..",
              icon: "success",
              confirmButtonText: "OK"
            });
            
        
        }
        else{
          Swal.fire({
            title: "Error!",
            text: "Failed to generate image. Please try again.",
            icon: "error",
            confirmButtonText: "OK"
          });
          
        }
    } catch (error) {
        console.error(error);
        alert("Error generating image. Please try again.");
    }

    generateBtn.innerHTML = "Generate AI Image"
    
});

     
      
    </script>
</body>
</html>
